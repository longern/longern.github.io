{"version":3,"sources":["webpack:///./src/components/MobileNetV2.vue?7f5a","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/components/MobileNetV2.vue?d473","webpack:///src/components/MobileNetV2.vue","webpack:///./src/components/MobileNetV2.vue?e6ef","webpack:///./src/components/MobileNetV2.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobileNetV2_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobileNetV2_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","d","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","model","expression","staticClass","ref","attrs","id","width","height","on","click","$event","$refs","uploader","_v","type","hidden","change","handleFileChange","answer","staticRenderFns","MobileNetV2vue_type_script_lang_js_","data","methods","_this","files","hiddenCanvas","mobileNetV2Hidden","file","imgUrl","URL","createObjectURL","img","Image","onload","revokeObjectURL","src","getContext","drawImage","makePrediction","_makePrediction","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","predictionIndexTensor","_ref","_ref2","predictionIndex","_this2","wrap","_context","prev","external_tf_","x","asType","expandDims","prediction","predict","squeeze","sent","slicedToArray","dispose","ImageNetLabels","stop","_x","apply","arguments","mounted","_mounted","_callee2","_context2","components_MobileNetV2vue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-320a22d0.388dfffb.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileNetV2.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileNetV2.vue?vue&type=style&index=0&lang=css&\"","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(!_vm.model),expression:\"!model\"}],staticClass:\"mobilenet_v2\"},[_c('el-row',[_c('canvas',{ref:\"mobileNetV2Hidden\",attrs:{\"id\":\"mobilenet-v2-hidden\",\"width\":\"224\",\"height\":\"224\"}})]),_c('el-row',[_c('el-button',{on:{\"click\":function($event){_vm.$refs.uploader.click()}}},[_vm._v(\"\\n      打开图片\\n    \")]),_c('input',{ref:\"uploader\",attrs:{\"type\":\"file\",\"hidden\":\"\"},on:{\"change\":_vm.handleFileChange}})],1),_c('el-row',[_vm._v(\"\\n    \"+_vm._s(_vm.answer)+\"\\n  \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mobilenet_v2\" v-loading=\"!model\">\r\n    <el-row>\r\n      <canvas\r\n        id=\"mobilenet-v2-hidden\"\r\n        ref=\"mobileNetV2Hidden\"\r\n        width=\"224\"\r\n        height=\"224\"\r\n      />\r\n    </el-row>\r\n    <el-row>\r\n      <el-button @click=\"$refs.uploader.click()\">\r\n        打开图片\r\n      </el-button>\r\n      <input ref=\"uploader\" type=\"file\" @change=\"handleFileChange\" hidden />\r\n    </el-row>\r\n    <el-row>\r\n      {{ answer }}\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport labels from './ImageNetLabels';\r\n\r\nexport default {\r\n  name: 'MobileNetV2',\r\n  data() {\r\n    return {\r\n      model: null,\r\n      answer: null,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    handleFileChange() {\r\n      if (!this.$refs.uploader.files.length) {\r\n        return;\r\n      }\r\n\r\n      this.answer = null;\r\n\r\n      const hiddenCanvas = this.$refs.mobileNetV2Hidden;\r\n      const file = this.$refs.uploader.files[0];\r\n      const imgUrl = URL.createObjectURL(file);\r\n      const img = new Image();\r\n    \r\n      img.onload = () => {\r\n        URL.revokeObjectURL(img.src);\r\n        hiddenCanvas.getContext(\"2d\").drawImage(img, 0, 0, 224, 224);\r\n\r\n        this.makePrediction(hiddenCanvas);\r\n      };\r\n\r\n      img.src = imgUrl;\r\n    },\r\n\r\n    async makePrediction(data) {\r\n      const predictionIndexTensor = tf.tidy(() => {\r\n        const x = tf.div(tf.fromPixels(data).asType('float32'), 255.).expandDims();\r\n        const prediction = this.model.predict(x).squeeze();\r\n        return tf.argMax(prediction);\r\n      });\r\n      const [predictionIndex] = await predictionIndexTensor.data();\r\n      predictionIndexTensor.dispose();\r\n      this.answer = labels[predictionIndex];\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    this.model = await tf.loadModel('models/mobilenet_v2/model.json');\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.mobilenet_v2 .el-row {\r\n  margin-bottom: 16px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileNetV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileNetV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MobileNetV2.vue?vue&type=template&id=169c3672&\"\nimport script from \"./MobileNetV2.vue?vue&type=script&lang=js&\"\nexport * from \"./MobileNetV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MobileNetV2.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"MobileNetV2.vue\"\nexport default component.exports"],"sourceRoot":""}